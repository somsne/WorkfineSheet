# ğŸš€ GitHub Pages éƒ¨ç½²æŒ‡å—

æœ¬é¡¹ç›®å·²é…ç½®è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pagesã€‚æ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯æ—¶ï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ„å»ºå¹¶å‘å¸ƒæœ€æ–°ç‰ˆæœ¬ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

### 1. å¯ç”¨ GitHub Pages

åœ¨ GitHub ä»“åº“ä¸­å¯ç”¨ Pagesï¼š

1. è¿›å…¥ä»“åº“è®¾ç½®: **Settings** â†’ **Pages**
2. **Source** é€‰æ‹©: `GitHub Actions`
3. ä¿å­˜é…ç½®

![GitHub Pages è®¾ç½®](https://docs.github.com/assets/cb-47267/mw-1440/images/help/pages/github-actions-source.webp)

### 2. é…ç½®ä»“åº“æƒé™

ç¡®ä¿ GitHub Actions æœ‰éƒ¨ç½²æƒé™ï¼š

1. è¿›å…¥: **Settings** â†’ **Actions** â†’ **General**
2. æ»šåŠ¨åˆ° **Workflow permissions**
3. é€‰æ‹©: `Read and write permissions`
4. å‹¾é€‰: `Allow GitHub Actions to create and approve pull requests`
5. ç‚¹å‡» **Save**

## ğŸ”§ å·¥ä½œæµé…ç½®

### è‡ªåŠ¨éƒ¨ç½²æµç¨‹

é¡¹ç›®åŒ…å«ä¸¤ä¸ª GitHub Actions å·¥ä½œæµï¼š

#### 1. CI å·¥ä½œæµ (`.github/workflows/ci.yml`)
- **è§¦å‘**: æ¨é€åˆ° `main`/`develop` åˆ†æ”¯ï¼Œæˆ–åˆ›å»º PR
- **ä»»åŠ¡**:
  - åœ¨ 4 ä¸ª Node.js ç‰ˆæœ¬ä¸Šè¿è¡Œæµ‹è¯• (18, 20, 22, 24)
  - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
  - è¿è¡Œä»£ç æ£€æŸ¥
  - ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š

#### 2. éƒ¨ç½²å·¥ä½œæµ (`.github/workflows/deploy.yml`)
- **è§¦å‘**: æ¨é€åˆ° `main` åˆ†æ”¯
- **ä»»åŠ¡**:
  1. å®‰è£…ä¾èµ–
  2. è¿è¡Œæµ‹è¯•ï¼ˆç¡®ä¿è´¨é‡ï¼‰
  3. æ„å»ºç”Ÿäº§ç‰ˆæœ¬
  4. éƒ¨ç½²åˆ° GitHub Pages

### è‡ªåŠ¨åŒ–æµç¨‹

```
git push origin main
     â†“
GitHub Actions è§¦å‘
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CI å·¥ä½œæµ   â”‚     â”‚  éƒ¨ç½²å·¥ä½œæµ   â”‚
â”‚             â”‚     â”‚              â”‚
â”‚ â€¢ å¤šç‰ˆæœ¬æµ‹è¯• â”‚     â”‚ â€¢ è¿è¡Œæµ‹è¯•    â”‚
â”‚ â€¢ ç±»å‹æ£€æŸ¥   â”‚     â”‚ â€¢ æ„å»ºé¡¹ç›®    â”‚
â”‚ â€¢ ä»£ç æ£€æŸ¥   â”‚     â”‚ â€¢ å‘å¸ƒ Pages  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“                     â†“
  ç”ŸæˆæŠ¥å‘Š          å‘å¸ƒæˆåŠŸ ğŸ‰
```

## ğŸŒ è®¿é—®åœ°å€

éƒ¨ç½²å®Œæˆåï¼Œä½ çš„åº”ç”¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨ï¼š

```
https://<username>.github.io/<repository>/
```

æœ¬é¡¹ç›®åœ°å€ï¼š
```
https://somsne.github.io/WorkfineSheet/
```

## ğŸ“ é…ç½®è¯´æ˜

### Vite é…ç½® (`vite.config.ts`)

```typescript
export default defineConfig({
  // GitHub Pages éœ€è¦æ­£ç¡®çš„ base è·¯å¾„
  base: process.env.NODE_ENV === 'production' 
    ? '/WorkfineSheet/'  // æ›¿æ¢ä¸ºä½ çš„ä»“åº“å
    : '/',
  // ... å…¶ä»–é…ç½®
})
```

âš ï¸ **é‡è¦**: å¦‚æœä½ çš„ä»“åº“åä¸æ˜¯ `WorkfineSheet`ï¼Œéœ€è¦ä¿®æ”¹ `base` è·¯å¾„ã€‚

### éƒ¨ç½²å·¥ä½œæµé…ç½®

```yaml
# .github/workflows/deploy.yml
on:
  push:
    branches: [ main ]  # æ¨é€åˆ° main åˆ†æ”¯æ—¶è§¦å‘
  workflow_dispatch:    # å…è®¸æ‰‹åŠ¨è§¦å‘

permissions:
  contents: read
  pages: write         # éœ€è¦å†™å…¥ Pages æƒé™
  id-token: write
```

## ğŸ” ç›‘æ§éƒ¨ç½²

### æŸ¥çœ‹éƒ¨ç½²çŠ¶æ€

1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾
2. æŸ¥çœ‹ "Deploy to GitHub Pages" å·¥ä½œæµ
3. ç‚¹å‡»æœ€æ–°è¿è¡ŒæŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### éƒ¨ç½²æˆåŠŸæ ‡è¯†

- âœ… å·¥ä½œæµæ˜¾ç¤ºç»¿è‰²å¯¹å‹¾
- âœ… åœ¨ **Settings** â†’ **Pages** å¯ä»¥çœ‹åˆ°éƒ¨ç½²åœ°å€
- âœ… è®¿é—®åœ°å€èƒ½æ­£å¸¸æ‰“å¼€åº”ç”¨

### å¸¸è§çŠ¶æ€

| å›¾æ ‡ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| ğŸŸ¢ | Success | éƒ¨ç½²æˆåŠŸ |
| ğŸŸ¡ | In Progress | æ­£åœ¨éƒ¨ç½² |
| ğŸ”´ | Failed | éƒ¨ç½²å¤±è´¥ï¼ŒæŸ¥çœ‹æ—¥å¿— |
| âšª | Queued | ç­‰å¾…éƒ¨ç½² |

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: éƒ¨ç½²å¤±è´¥ - æƒé™é”™è¯¯

**é”™è¯¯ä¿¡æ¯**: `Error: HttpError: Resource not accessible by integration`

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ä»“åº“æƒé™è®¾ç½®
2. ç¡®ä¿ Actions æœ‰ `write` æƒé™
3. å‚è€ƒä¸Šé¢çš„"é…ç½®ä»“åº“æƒé™"æ­¥éª¤

### é—®é¢˜ 2: é¡µé¢ 404 é”™è¯¯

**åŸå› **: `base` è·¯å¾„é…ç½®ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// vite.config.ts
base: '/ä½ çš„ä»“åº“å/'  // å¿…é¡»ä¸ä»“åº“ååŒ¹é…
```

### é—®é¢˜ 3: èµ„æºåŠ è½½å¤±è´¥

**åŸå› **: é™æ€èµ„æºè·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- ç¡®ä¿ `base` é…ç½®æ­£ç¡®
- æ£€æŸ¥æ„å»ºäº§ç‰©çš„è·¯å¾„

### é—®é¢˜ 4: éƒ¨ç½²å¡ä½ä¸åŠ¨

**è§£å†³æ–¹æ¡ˆ**:
1. å–æ¶ˆå½“å‰è¿è¡Œ
2. æ‰‹åŠ¨è§¦å‘: **Actions** â†’ **Deploy to GitHub Pages** â†’ **Run workflow**

## ğŸ¨ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æœ‰è‡ªå·±çš„åŸŸåï¼š

1. åœ¨ä»“åº“æ ¹ç›®å½•åˆ›å»º `public/CNAME` æ–‡ä»¶ï¼š
   ```
   yourdomain.com
   ```

2. åœ¨ DNS æä¾›å•†æ·»åŠ  CNAME è®°å½•ï¼š
   ```
   CNAME  www  <username>.github.io
   ```

3. åœ¨ **Settings** â†’ **Pages** é…ç½®è‡ªå®šä¹‰åŸŸå

## ğŸ“Š éƒ¨ç½²ç»Ÿè®¡

æŸ¥çœ‹éƒ¨ç½²å†å²å’Œç»Ÿè®¡ï¼š

1. **Environments**: **Settings** â†’ **Environments** â†’ **github-pages**
2. å¯ä»¥çœ‹åˆ°:
   - éƒ¨ç½²å†å²
   - æ¯æ¬¡éƒ¨ç½²çš„æ—¶é—´
   - éƒ¨ç½²çš„æäº¤ SHA

## ğŸ”„ æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

ä¸æ¨é€ä»£ç ä¹Ÿå¯ä»¥é‡æ–°éƒ¨ç½²ï¼š

1. è¿›å…¥ **Actions** æ ‡ç­¾
2. é€‰æ‹© "Deploy to GitHub Pages"
3. ç‚¹å‡» **Run workflow**
4. é€‰æ‹©åˆ†æ”¯ (`main`)
5. ç‚¹å‡» **Run workflow** æŒ‰é’®

## ğŸ“¦ æ„å»ºäº§ç‰©

éƒ¨ç½²çš„å†…å®¹æ¥è‡ª `dist/` ç›®å½•ï¼š

```
dist/
â”œâ”€â”€ index.html          # å…¥å£é¡µé¢
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ index-*.js      # æ‰“åŒ…åçš„ JS
â”‚   â””â”€â”€ index-*.css     # æ‰“åŒ…åçš„ CSS
â””â”€â”€ ...
```

## ğŸš€ å¿«é€Ÿå‘½ä»¤

```bash
# æœ¬åœ°é¢„è§ˆç”Ÿäº§æ„å»º
npm run build
npm run preview

# æµ‹è¯•åå†éƒ¨ç½²ï¼ˆæ¨èï¼‰
npm test && git push origin main

# å¼ºåˆ¶é‡æ–°éƒ¨ç½²
git commit --allow-empty -m "chore: trigger deploy"
git push origin main
```

## ğŸ“š å‚è€ƒèµ„æº

- [GitHub Pages å®˜æ–¹æ–‡æ¡£](https://docs.github.com/en/pages)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Vite éƒ¨ç½²æŒ‡å—](https://vitejs.dev/guide/static-deploy.html)

## âœ… æ£€æŸ¥æ¸…å•

éƒ¨ç½²å‰ç¡®è®¤ï¼š

- [ ] å·²å¯ç”¨ GitHub Pages
- [ ] Actions æœ‰å†™å…¥æƒé™
- [ ] `vite.config.ts` çš„ `base` è·¯å¾„æ­£ç¡®
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æœ¬åœ°æ„å»ºæˆåŠŸ

---

**æœ€åæ›´æ–°**: 2025-11-27  
**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: âœ… è‡ªåŠ¨éƒ¨ç½²å·²é…ç½®
